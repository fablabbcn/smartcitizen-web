<section class="kit_dataChange">
  <section class="timeline" flex="1" layout="row" layout-align="center center">
    <div class="timeline_container" layout="row" layout-align="space-between center">
      <div layout="row" layout-align="start center">
        <div class="timeline_stepCircle"
        ng-class="{'is-on':vm.step===1, 'is-off':vm.step!==1}"
        layout="row" layout-align="center center">
          1
        </div>
        <div class="timeline_stepName">
          Kit data
        </div>
        <div class="timeline_line timeline_line_small"></div>
        <div layout="row" layout-align="start center">
          <div class="timeline_stepCircle"
          ng-class="{'is-on':vm.step===2, 'is-off':vm.step!==2}"
          layout="row" layout-align="center center"
          ng-class="{'is-on': vm.step === 2, 'is-off': vm.step !== 2}">
            2
          </div>
          <div class="timeline_stepName">
            Set up
          </div>
        </div>
      </div>
      <md-button class="md-flat md-primary timeline_buttonBack" ng-click="vm.backToProfile()">Back to Profile</md-button>
      <md-button class="md-flat md-primary timeline_buttonSave" ng-click="vm.submitForm()">Save</md-button>
    </div>
  </section>
  <section class="timeline_content" flex="1">
    <section ng-show="vm.step === 1">
      <form>
        <section class="form_block form_blockNormal isEven">
          <div layout="row" layout-align="start start">
            <div class="form_blockContent">
              <div layout="row">
                <div class="form_blockContent_text">
                  <h2>Basic information</h2>
                  <small>Please, provide kit basic info. That includes a name and exposure</small>
                </div>
              </div>
            </div>
            <div class="form_blockInput" flex>
              <div class="form_blockInput_container">
                <md-input-container>
                  <label>Kit Name</label>
                  <input type="text" ng-model="vm.kitForm.name">
                </md-input-container>
                <div layout="row" layout-align="space-between start">
                  <div class="form_blockInput_select">
                    <label>Exposure:</label>
                    <md-select ng-model="vm.kitForm.exposure" placeholder="Select exposure">
                      <md-option ng-repeat="exposure in vm.exposure" ng-value="{{ exposure.value }}">{{ exposure.name }}</md-option>
                    </md-select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section class="form_block form_blockMap">
          <div layout="row" layout-align="start start">
            <div class="form_blockContent">
              <div layout="row">
                <div class="form_blockContent_text">
                  <h2>Kit location</h2>
                  <small>Please, type your kit location. If you prefer you can turn off the auto complete search functionality to specify your latitude and longitude.</small>
                </div>
              </div>
            </div>
            <div class="form_blockInput" flex>
              <div class="form_blockInput_button" ng-if="!vm.kitForm.location.lat && !vm.kitForm.location.lng">
                <div class="form_blockInput_container" layout="row" layout-align="center center">
                  <md-button class="md-flat md-primary" ng-click="vm.getLocation()">Get your location</md-button>
                </div>
              </div>
              <div class="form_blockInput_map" ng-if="vm.kitForm.location.lat && vm.kitForm.location.lng">
                <leaflet center="vm.kitForm.location" defaults="vm.defaults" markers="vm.markers" tiles="vm.tiles" width="100%" height="100%"></leaflet>
              </div>
            </div>
          </div>
        </section>
        <section class="form_block form_blockNormal isEven">
          <div layout="row" layout-align="start start">
            <div class="form_blockContent">
              <div layout="row">
                <div class="form_blockContent_text">
                  <h2>Kit tags</h2>
                  <small>Kits can be grouped by tags. Choose from the available tags or submit a tag request on the <a href="https://forum.smartcitizen.me/" target="_blank">Forum</a>.</small>
                </div>
              </div>
            </div>
            <div class="form_blockInput" flex>
              <div class="form_blockInput_container">
                <div>
                  <md-select ng-model="vm.tag" placeholder="Select tag">
                    <md-option ng-value="{{ tag.id }}" ng-repeat="tag in vm.tags">{{ tag.name }}</md-option>
                  </md-select>
                </div>
                <div class="form_blockInput_chips">
                  <div class="chips" layout="row" layout-align="start center">
                    <div class="chip kit_tag" ng-repeat="tag in vm.kitForm.tags">
                      <span class="chip_name">{{ tag }}</span>
                      <button class="chip_icon" ng-click="vm.removeTag(tag.id)" class="map_filter_icon" arial-label>
                        <md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section class="form_block form_blockNormal">
          <div layout="row" layout-align="start start">
            <div class="form_blockContent">
              <div layout="row">
                <div class="form_blockContent_text">
                  <h2>Kit description</h2>
                  <small>Say something nice about your kit. Why is it for? Is this part of any kind of project? Whatever :)</small>
                </div>
              </div>
            </div>
            <div class="form_blockInput" flex>
              <div class="form_blockInput_container">
                <md-input-container>
                  <label>Description</label>
                  <textarea type="text" ng-model="vm.kitForm.description" placeholder="Describe your kit" md-maxlength="120"></textarea>
                </md-input-container>
              </div>
            </div>
          </div>
        </section>
      </form>
      <md-button class="md-primary timeline_button timeline_buttonOpen" ng-click="vm.openKitSetup()">Open kit set up</md-button>
    </section>
    <section ng-show="vm.step === 2">
      <form>
        <section class="form_block form_blockNormal isEven">
          <div layout="row" layout-align="start start">
            <div class="form_blockContent">
              <div layout="row">
                <div class="form_blockContent_text long">
                  <h2>Setup your kit</h2>
                  <small>In order to have your kit connected to the Smart Citizen platform, we need a few step involving the connexion of your kit to your computer. This tool will help you register your kit to the platform, setup your kit's Wi-Fi settings and update its firmware. Currently we support Google Chrome in Win, Mac and Linux. If this is your first time, maybe you will like to follow the <a href="http://docs.smartcitizen.me/#/start/adding-a-smart-citizen-kit" target="_blank">Startup guide</a>.</small>
                </div>
                <img src="assets/images/sckit_avatar_2.jpg" alt="Smartcitizen Kit">
              </div>
            </div>
          </div>
        </section>
      </form>
      <section class="form_block">
        <div setuptool></div>
      </section>
      <form>
        <section class="form_block form_blockNormal isEven">
          <div layout="row" layout-align="start start">
            <div class="form_blockContent">
              <div layout="row">
                <div class="form_blockContent_text">
                  <h2>Mac address</h2>
                  <small>The setup tool will read the Mac Address automatically from your kit. Plase wait or enter it manually.</small>
                </div>
              </div>
            </div>
            <div class="form_blockInput" flex>
              <div class="form_blockInput_container">
                <md-input-container>
                  <label>Mac Address</label>
                  <input type="text" pattern="([0-9A-Fa-f]{2}\:){5}([0-9A-Fa-f]{2})" ng-model="vm.macAddress">
                </md-input-container>
              </div>
            </div>
          </div>
        </section>
      </form>
      <md-button class="md-primary timeline_button timeline_buttonOpen inverted" ng-click="vm.submitForm()">Save</md-button>
    </section>
  </section>
</section>
