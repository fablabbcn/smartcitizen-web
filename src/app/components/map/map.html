<section class="map" change-map-height>
  <leaflet center="vm.center" layers="vm.layers" markers="vm.markers" defaults="vm.defaults" event-broadcast="vm.events" width="100%" height="100%"></leaflet> <!-- tiles="vm.tiles" -->
  <div class="map_legend" layout="row" layout-align="start center" move-filters>
    <div class="map_legend__filtersContainer" layout="column">
      <div class="map_legend__filtersRow" ng-click="vm.openFilterPopup()" flex="50">
        <div class="map_filter_button">
          <md-icon md-svg-src="./assets/images/filter_icon.svg"></md-icon>
        </div>
        <p class="filter_description">Filters</p>
      </div>
      <div class="map_legend__filtersRow" ng-click="vm.openTagPopup()" flex="50">
        <div class="map_filter_button">
          <p>#</p>
        </div>
        <p class="filter_description">Tags</p>
      </div>
    </div>
    <div class="chips" layout="column">
      <div layout="row" class="chips_row">
        <span ng-repeat="filter in vm.selectedFilters"
          ng-if="!vm.checkAllFiltersSelected()"
          class="chip label">
          {{ filter }}
          <md-icon ng-click="vm.removeFilter(filter)" md-svg-src="./assets/images/close_icon_black.svg"></md-icon>
        </span>
      </div>
      <div layout="row" class="chips_row" layout-wrap>
        <span class="chip tag" ng-repeat="tag in vm.selectedTags">
          {{ tag }}
          <md-icon ng-click="vm.removeTag(tag)" md-svg-src="./assets/images/close_icon_black.svg"></md-icon>
        </span>
      </div>
    </div>
  </div>

  <md-progress-linear ng-show="vm.kitLoading || !vm.readyForKit.map" class="md-hue-3 kit_spinner" md-mode="indeterminate"></md-progress-circular>
</section>
