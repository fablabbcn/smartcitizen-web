<div class="profile_content" layout="row">
  <div class="profile_sidebar">
    <p class="profile_sidebar_title">EDIT YOUR PROFILE</p>
    <p class="profile_sidebar_description">
    A complete profile helps us to bring to you a better experience. Please, take your time completing all fields.
    </p>
    <md-button ng-href="mailto:support@smartcitizen.me" class="profile_sidebar_button myProfile_sidebar_button">
      <md-icon md-svg-src="./assets/images/support_icon_blue.svg" class="profile_sidebar_avatar"></md-icon>
      <span>Support</span>
    </md-button>
    <md-button ng-href="http://forum.smartcitizen.me" ng-click="" class="profile_sidebar_button myProfile_sidebar_button">
      <md-icon md-svg-src="./assets/images/community_icon_blue.svg" class="profile_sidebar_avatar"></md-icon>
      <span>Community</span>
    </md-button>
  </div>
  <div class="profile_content_main" flex>
    <div class="myProfile_content_form">
      <div class="myProfile_form_avatar" layout="row" layout-align="start center">
        <img ng-src="{{ vm.user.profile_picture || vm.user.avatar || './assets/images/avatar.svg' }}" class="myProfile_form_avatarImage" />
        <md-button class="myProfile_form_avatarButton" ngf-select ngf-change="vm.uploadAvatar($files)">CHANGE AVATAR</md-button>
      </div>
      <form ng-submit="vm.updateUser(vm.formUser)">
        <div layout layout-sm="column" class="field myProfile_content_form_input">
          <md-input-container flex>
            <label>Username</label>
            <input type="text" ng-model="vm.formUser.username">
          </md-input-container>
          <p class="myProfile_updateForm_error" ng-show="!!vm.errors.username.length">
          <span ng-repeat="error in vm.errors.username">
            Username {{ error }}<span ng-if="!$last">,</span>
          </span>
          </p>
        </div>
        <div layout layout-sm="column" class="field myProfile_content_form_input">
          <md-input-container flex>
            <label>Password</label>
            <input type="password" ng-model="vm.formUser.password">
          </md-input-container>
          <p class="myProfile_updateForm_error" ng-show="!!vm.errors.password.length">
          <span ng-repeat="error in vm.errors.password">
            Password {{ error }}<span ng-if="!$last">,</span>
          </span>
          </p>
        </div>
        <div layout layout-sm="column" class="field myProfile_content_form_input">
          <md-input-container flex>
            <label>Email</label>
            <input type="email" ng-model="vm.formUser.email">
          </md-input-container>
          <p class="myProfile_updateForm_error" ng-show="!!vm.errors.email.length">
          <span ng-repeat="error in vm.errors.email">
            Email {{ error }}<span ng-if="!$last">,</span>
          </span>
          </p>
        </div>
        <div layout layout-sm="column" class="field myProfile_content_form_input">
          <md-input-container flex>
            <label>City</label>
            <input type="text" ng-model="vm.formUser.city">
          </md-input-container>
          <p class="myProfile_updateForm_error" ng-show="!!vm.errors.city.length">
          <span ng-repeat="error in vm.errors.city">
            City {{ error }}<span ng-if="!$last">,</span>
          </span>
          </p>
        </div>
        <div layout layout-sm="column" class="field myProfile_content_form_input">
          <md-input-container class="countryInput_container" flex>
            <label>Country</label>
            <md-autocomplete
                              md-search-text="vm.searchText"
                              md-items="item in vm.getCountries(vm.searchText)"
                              md-item-text="item"
                              md-selected-item="vm.formUser.country">
              <span>{{ item }}</span>
            </md-autocomplete>
          </md-input-container>
          <p class="myProfile_updateForm_error" ng-show="!!vm.errors.country.length">
          <span ng-repeat="error in vm.errors.country">
            Country {{ error }}<span ng-if="!$last">,</span>
          </span>
          </p>
        </div>
        <div layout layout-sm="column" class="field myProfile_content_form_input">
          <md-input-container flex>
            <label>Website</label>
            <input type="url" ng-model="vm.formUser.url">
          </md-input-container>
          <p class="myProfile_updateForm_error" ng-show="!!vm.errors.url.length">
          <span ng-repeat="error in vm.errors.url">
            URL {{ error }}<span ng-if="!$last">,</span>
          </span>
          </p>
        </div>
        <md-button type="submit" class="myProfile_form_updateButton" type="submit">UPDATE PROFILE</md-button> <!-- ng-click="vm.updateUser(vm.formUser)" -->
      </form>

      <div class="myProfile_apiKey_block">
        <div class="myProfile_apiKey" layout="row" layout-align="start center">
          <md-icon flex="10" md-svg-src="./assets/images/key_icon.svg" class="myProfile_tab_icon"></md-icon>
          <span flex="30" class="myProfile_apiKey_text">oAuth API Key:</span>
          <div flex="60" api-key="vm.user.token"></div>
        </div>
        <small>Keep it safe as a password, never show it or release it publicly. The new API uses oAuth but doesn't require any Keys for basic queries. Soon you will be able to manage and renew Keys per application. Check the <a target="_blank" href="http://developer.smartcitizen.me/">documentation and have fun!</a></small></small>
      </div>

      <div class="myProfile_apiKey_block">
        <div class="myProfile_apiKey" layout="row" layout-align="start center">
          <md-icon flex="10" md-svg-src="./assets/images/key_icon.svg" class="myProfile_tab_icon"></md-icon>
          <span flex="30" class="myProfile_apiKey_text">Legacy API Key:</span>
          <div flex="60" api-key="vm.user.key"></div>
        </div>
        <small>This API Key is limited to the <a target="_blank" href="http://developer.smartcitizen.me/#legacy">legacy API</a>.</small>
      </div>

      <md-button ng-click="vm.removeUser()" class="warn" style="font-size:18px" type="button">DELETE ACCOUNT</md-button><br>
      <small>Delete your profile will erase all your data. Please consider think twice before click this button.</small>
    </div>
  </div>
</div>
